import{u as P}from"./BIOjjMEG.js";import{c as n,o as a,a as e,_ as L,r as m,j as f,g as T,b as d,k as t,l as r,t as y,d as _,m as C,n as B}from"./B4JIGLQQ.js";import{r as N}from"./B-W1TiBx.js";function h(x,p){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}const G={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4"},j={class:"max-w-md w-full space-y-8"},A={class:"text-center"},D={class:"mx-auto h-12 w-12 bg-indigo-600 rounded-full flex items-center justify-center"},I={class:"card bg-white shadow-xl"},V={class:"card-body"},W={key:0,class:"text-center py-8"},z={key:1,class:"text-center py-8"},F={class:"alert alert-warning"},M={key:2,class:"alert alert-error mb-4"},q={class:"font-medium"},H={key:0,class:"text-sm mt-1"},R={key:3,class:"alert alert-warning mb-4"},Z={key:4,class:"mb-6 grid justify-center"},E=["disabled"],Y={key:0},$={key:1},J={__name:"login",setup(x){const{user:p,loading:v,error:i,signInWithGoogle:w}=P(),c=m(!1),l=m(""),u=m(!1),g=m(!1);f(()=>{setTimeout(()=>{v.value&&(g.value=!0,console.error("Firebase loading timeout - environment variables may not be loaded"))},5e3)});const b=()=>{window.location.reload()},k=async()=>{try{c.value=!0,i.value="",l.value="",u.value=!1,console.log("Login: Attempting Google sign-in...");const o=await w();console.log("Login: Sign-in successful:",o)}catch(o){console.error("Login: Google sign-in error:",o),o.message.includes("popup was blocked")?(i.value="Popup Blocked",l.value="Please allow popups for this site and try again.",u.value=!0):o.message.includes("unauthorized domain")?(i.value="Domain Not Authorized",l.value="This domain is not configured for authentication. Please contact support."):o.message.includes("cancelled")?(i.value="Sign-in Cancelled",l.value="You cancelled the sign-in process."):(i.value="Sign-in Failed",l.value=o.message||"An unexpected error occurred. Please try again.")}finally{c.value=!1}};return T(p,o=>{console.log("Login: User state changed:",o),o&&(console.log("Login: User authenticated, navigating to dashboard"),console.log("Login: User details:",{uid:o.uid,email:o.email,displayName:o.displayName}),B("/dashboard"))},{immediate:!0}),f(()=>{window.location.protocol!=="https:"&&window.location.hostname!=="localhost"&&(u.value=!0,i.value="Security Warning",l.value="This site requires HTTPS for authentication to work properly.")}),(o,s)=>{const S=C("font-awesome-icon");return a(),n("div",G,[e("div",j,[e("div",A,[e("div",D,[d(t(N),{class:"h-8 w-8 text-white"})]),s[0]||(s[0]=e("h2",{class:"mt-6 text-3xl font-bold text-gray-900"}," Welcome back ",-1)),s[1]||(s[1]=e("p",{class:"mt-2 text-sm text-gray-600"}," Sign in to your account to continue ",-1))]),e("div",I,[e("div",V,[t(v)&&!t(g)?(a(),n("div",W,s[2]||(s[2]=[e("div",{class:"loading loading-spinner loading-lg"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Loading...",-1)]))):r("",!0),t(g)?(a(),n("div",z,[e("div",F,[d(t(h),{class:"h-5 w-5"}),s[3]||(s[3]=e("div",null,[e("span",{class:"font-medium"},"Loading Timeout"),e("div",{class:"text-sm mt-1"},"Firebase is taking too long to initialize. Please refresh the page.")],-1))]),e("button",{onClick:b,class:"btn btn-primary mt-4"}," Refresh Page ")])):r("",!0),t(i)?(a(),n("div",M,[d(t(h),{class:"h-5 w-5"}),e("div",null,[e("span",q,y(t(i)),1),t(l)?(a(),n("div",H,y(t(l)),1)):r("",!0)])])):r("",!0),t(u)?(a(),n("div",R,[d(t(h),{class:"h-5 w-5"}),s[4]||(s[4]=e("div",null,[e("span",{class:"font-medium"},"Browser Settings Required"),e("div",{class:"text-sm mt-1"}," Please allow popups and cookies for this site to enable Google sign-in. ")],-1))])):r("",!0),!t(v)&&!t(g)?(a(),n("div",Z,[e("button",{onClick:k,disabled:t(c),class:"btn w-full max-w-sm bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 shadow-sm disabled:opacity-50"},[d(S,{icon:["fab","google"],class:"w-5 h-5 mr-2"}),t(c)?(a(),n("span",Y,"Signing in...")):(a(),n("span",$,"Continue with Google"))],8,E)])):r("",!0),s[5]||(s[5]=e("div",{class:"text-center mt-6"},[e("p",{class:"text-sm text-gray-600"},[_(" Don't have an account? "),e("a",{href:"#",class:"font-medium text-indigo-600 hover:text-indigo-500"}," Sign up ")])],-1))])]),s[6]||(s[6]=e("div",{class:"text-center text-xs text-gray-500"},[e("p",null,"By signing in, you agree to our"),e("p",null,[e("a",{href:"#",class:"hover:underline"},"Terms of Service"),_(" and "),e("a",{href:"#",class:"hover:underline"},"Privacy Policy")])],-1))])])}}},X=L(J,[["__scopeId","data-v-afbdc956"]]);export{X as default};
