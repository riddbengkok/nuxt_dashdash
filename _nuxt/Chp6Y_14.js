import{_ as D}from"./CzhSaTRZ.js";import{u as T}from"./CbRn58ud.js";import{g as c,j as w,n as h,c as r,b as E,a as t,k as e,t as a,p as g,l as f,o as d}from"./C_QB8wpj.js";import"./CPUPFeT-.js";import"./Biws_ZL-.js";const N={class:"min-h-screen bg-gray-50"},L={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},M={class:"px-4 py-6 sm:px-0"},V={key:0,class:"text-center py-8"},C={key:1,class:"alert alert-error"},I={key:2,class:"card bg-white shadow"},S={class:"card-body"},U={class:"mt-6 p-4 bg-gray-50 rounded-lg"},Y={class:"space-y-2"},$={class:"flex items-center space-x-2"},A={class:"flex items-center space-x-2"},B={class:"flex items-center space-x-2"},G={class:"text-sm text-gray-500"},R={class:"flex items-center space-x-2"},H={class:"mt-6 p-4 bg-yellow-50 rounded-lg"},P={class:"space-y-2"},j={class:"flex items-center space-x-2"},z={key:0,class:"flex items-center space-x-2"},W={class:"text-sm text-yellow-600"},q={key:1,class:"flex items-center space-x-2"},F={class:"mt-4 p-4 bg-blue-50 rounded-lg"},J={class:"text-xs text-blue-700"},K={key:0},O={key:3,class:"card bg-white shadow"},ot={__name:"dashboard",setup(Q){const{user:n,loading:u,error:x,tokenExpiry:i,isTokenExpired:p,refreshToken:y}=T();c(n,o=>{console.log("Dashboard: User state changed:",o),o&&console.log("Dashboard: User details:",{uid:o.uid,email:o.email,displayName:o.displayName,photoURL:o.photoURL,emailVerified:o.emailVerified})},{immediate:!0}),c(u,o=>{console.log("Dashboard: Loading state changed:",o)}),c(x,o=>{console.log("Dashboard: Error state changed:",o)}),c(i,o=>{console.log("Dashboard: Token expiry changed:",o)}),c(p,o=>{console.log("Dashboard: Token expired status:",o)});const v=()=>{if(!i.value)return"Unknown";const o=new Date,s=i.value-o,l=Math.floor(s/1e3/60),m=Math.floor(l/60),b=Math.floor(m/24);return s<0?"Expired":b>0?`${b} day(s)`:m>0?`${m} hour(s)`:l>0?`${l} minute(s)`:"Less than 1 minute"},_=()=>{if(!i.value)return"text-gray-600";const o=new Date,s=i.value-o,l=Math.floor(s/1e3/60);return s<0||l<5?"text-red-600":l<30?"text-yellow-600":"text-green-600"},k=()=>{h("/login")};return w(()=>{console.log("Dashboard: Component mounted"),console.log("Dashboard: Initial user state:",n.value),console.log("Dashboard: Initial loading state:",u.value),setTimeout(()=>{!n.value&&!u.value&&(console.log("Dashboard: No user found, redirecting to login"),h("/login"))},2e3)}),(o,s)=>{const l=D;return d(),r("div",N,[E(l),t("div",L,[t("div",M,[e(u)?(d(),r("div",V,s[1]||(s[1]=[t("div",{class:"loading loading-spinner loading-lg"},null,-1),t("p",{class:"mt-4 text-gray-600"},"Loading user data...",-1)]))):e(x)?(d(),r("div",C,[t("span",null,a(e(x)),1)])):e(n)?(d(),r("div",I,[t("div",S,[s[12]||(s[12]=t("h2",{class:"card-title text-black"},"Welcome to your Dashboard!",-1)),s[13]||(s[13]=t("p",{class:"text-gray-600"}," You have successfully signed in with Google. This is a static deployment that works on GitHub Pages. ",-1)),t("div",U,[s[6]||(s[6]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Your Profile",-1)),t("div",Y,[t("div",$,[s[2]||(s[2]=t("span",{class:"font-medium text-gray-700"},"Name:",-1)),t("span",null,a(e(n).displayName),1)]),t("div",A,[s[3]||(s[3]=t("span",{class:"font-medium text-gray-700"},"Email:",-1)),t("span",null,a(e(n).email),1)]),t("div",B,[s[4]||(s[4]=t("span",{class:"font-medium text-gray-700"},"User ID:",-1)),t("span",G,a(e(n).uid),1)]),t("div",R,[s[5]||(s[5]=t("span",{class:"font-medium text-gray-700"},"Email Verified:",-1)),t("span",{class:g(["text-sm",e(n).emailVerified?"text-green-600":"text-red-600"])},a(e(n).emailVerified?"Yes":"No"),3)])])]),t("div",H,[s[10]||(s[10]=t("h3",{class:"text-lg font-medium text-yellow-900 mb-4"},"Token Information",-1)),t("div",P,[t("div",j,[s[7]||(s[7]=t("span",{class:"font-medium text-yellow-700"},"Token Status:",-1)),t("span",{class:g(["text-sm",e(p)?"text-red-600":"text-green-600"])},a(e(p)?"Expired":"Valid"),3)]),e(i)?(d(),r("div",z,[s[8]||(s[8]=t("span",{class:"font-medium text-yellow-700"},"Expires At:",-1)),t("span",W,a(e(i).toLocaleString()),1)])):f("",!0),e(i)?(d(),r("div",q,[s[9]||(s[9]=t("span",{class:"font-medium text-yellow-700"},"Time Until Expiry:",-1)),t("span",{class:g(["text-sm",_()])},a(v()),3)])):f("",!0),t("button",{onClick:s[0]||(s[0]=(...m)=>e(y)&&e(y)(...m)),class:"btn btn-warning btn-sm mt-2"}," Refresh Token ")])]),t("div",F,[s[11]||(s[11]=t("h4",{class:"font-medium text-blue-900 mb-2"},"Debug Info:",-1)),t("div",J,[t("p",null,"User ID: "+a(e(n).uid),1),t("p",null,"Email: "+a(e(n).email),1),t("p",null,"Display Name: "+a(e(n).displayName),1),t("p",null,"Token Expired: "+a(e(p)),1),e(i)?(d(),r("p",K,"Token Expiry: "+a(e(i).toLocaleString()),1)):f("",!0)])])])])):(d(),r("div",O,[t("div",{class:"card-body text-center"},[s[14]||(s[14]=t("h2",{class:"card-title"},"Not Authenticated",-1)),s[15]||(s[15]=t("p",{class:"text-gray-600 mb-4"},"You need to sign in to access the dashboard.",-1)),t("button",{onClick:k,class:"btn btn-primary"}," Go to Login ")])]))])])])}}};export{ot as default};
